# Gothrix CMS/CMF

## В разработке!

### Цели
- единая точка входа
- слой промежуточного ПО
- компоненты для вывода данных с возможностью повторного применения
- простая "DB first" ОРМ
- расширяемость через модули
- СЕО ориентированность (SSR в комплекте)
- аутентификация/авторизация в комплекте
- кэш
- очереди задач
- электронная почта
- логирование
- готовый раздел администрирования

### Стек технологий
- [`golang`](https://go.dev/) - компилируемый многопоточный язык программирования
- [`echo`](https://echo.labstack.com/) - каркас, роутинг, слой промежуточного ПО
- [`sqlc`](https://sqlc.dev/) - простая "DB first" ОРМ, генерация типобезопасного кода из SQL
- [`templ`](https://templ.guide/) - шаблонизатор, создание HTML с помощью Go
- [`htmx`](https://htmx.org/) - динамический HTML, возможность реализовать SPA+SSR на Go(обертка над AJAX)
- [`alpinejs`](https://alpinejs.dev/) - реактивный HTML, легкий JS фреймворк
- [`purecss`](https://purecss.io/) - легкий CSS каркас
- [`mysql`](https://www.mysql.com/) - реляционная база данных
- [`redis`](https://redis.io/) - резидентная база данных (для сессий, кэша, очередей и т.п.)


### Структура проекта

```
cmd/                        Основные приложения для текущего проекта
    web/                    Web приложение
        main.php      
    console/                Приложение консольных команд
        main.php      
config/                     Файлы конфигурации
    config.php              Основной конфиг
docs/                       Документация
internal/                   Внутренний код приложения и библиотек
    Controllers/            Классы HTTP-приложений (действия, промежуточное ПО и т. д.)
    Infrastructure/         Вспомогательные классы (фабрики, слушатели и т. д.)
        sql/                Sql запросы для sqlc
    Model/                  Классы модели предметной области (сущности, репозитории и т. д.)
    Views/                  Шаблоны и представления   
    internal.go             Основной файл сайта
    route.go                Файл с маршрутизацией сайта
modules/                    Модули
    module_name/            Исходный код модуля
        Controllers/        Классы HTTP-приложений (действия, промежуточное ПО и т. д.)
        Infrastructure/     Вспомогательные классы (фабрики, слушатели и т. д.)
            sql/            Sql запросы для sqlc
        Model/              Классы модели предметной области (сущности, репозитории и т. д.)
        Views/              Шаблоны и представления   
        module_name.go      Основной файл модуля
        route.go            Файл с маршрутизацией модуля
static/                     

```

### Потенциальные модули
> **Модуль** - это блок, отвечающий за определенную функциональность, содержит API доступа к данным, бизнес-логику и события.


#### Админка
-   `core` - ядро, от него зависят все остальные модули
-   `user` - пользователи, аутентификация
-   `admin` - настройки и т.п., зависит от user
-   `rbac` - авторизация по схеме роль-модуль-действие, зависит от user и admin


#### Контент
-   `content` - генерация сущностей page+category, если торговля - то сущности по факту это продукт + категория
-   `media` - работа с файлами, от него может зависеть модуль content
-   `seo` - метаданные страниц, от него может зависеть модуль content
-   `property` - зависит от content - заведение свойств для контентной сущности
-   `facetfilter` - фильтр по свойствам, зависит от content и property, если есть price или stock, то + они
-   `comment` - комментарии, зависит от content


#### Торговля

-   `customer` - клиент, зависит от user
-   `wish` - зависит от content и customer
-   `compare` - зависит от content и customer
-   `price` - цена, зависит от content
-   `stock` - запас, зависит от price и content
-   `сart` - корзина, зависит от customer и price (если есть stock, то можно учитывать количество на складе)
-   `order` - заказ, зависит от customer и сart
-   `sale` - скидки у заказов, зависит от order
-   `payment` - платежные системы у заказов, зависит от order
-   `delivery` - доставки у заказов, зависит от order
